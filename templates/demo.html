{% extends "base.html" %}

{% block title %}العرض التوضيحي - {{ super() }}{% endblock %}

{% block page_title %}العرض التوضيحي{% endblock %}

{% block content %}
<div class="demo-container" data-page="demo">
    <!-- Demo Introduction -->
    <div class="card demo-intro">
        <div class="card-header">
            <h2 class="card-title">
                <i class="fas fa-play-circle"></i>
                تجربة النظام التفاعلية
            </h2>
        </div>
        <div class="card-body">
            <p class="demo-description">
                جرب النظام بنفسك مع النصوص التوضيحية التالية التي تحتوي على أخطاء إملائية شائعة. 
                انقر على أي نص لتحميله في مربع التدقيق وشاهد كيف يعمل النظام.
            </p>
        </div>
    </div>

    <!-- Demo Samples -->
    <div class="demo-samples">
        <div class="sample-card">
            <div class="sample-header">
                <h3><i class="fas fa-file-text"></i> نص أكاديمي</h3>
                <span class="sample-difficulty easy">سهل</span>
            </div>
            <div class="sample-content">
                <p class="sample-text" data-sample="academic">
                    هاذا بحث علمي يتناول موضوع التعليم الالكتروني في الجامعات العربيه. 
                    يهدف هذا البحث الى دراسة تأثير التكنولوجيا على العمليه التعليميه 
                    وكيفية تحسين جودة التعليم من خلال استخدام الوسائل الحديثه.
                </p>
                <div class="sample-stats">
                    <span><i class="fas fa-exclamation-triangle"></i> 8 أخطاء</span>
                    <span><i class="fas fa-clock"></i> 30 ثانية</span>
                </div>
                <button class="btn btn-primary sample-btn" data-action="load-sample" data-sample="academic">
                    <i class="fas fa-upload"></i> تحميل النص
                </button>
            </div>
        </div>

        <div class="sample-card">
            <div class="sample-header">
                <h3><i class="fas fa-newspaper"></i> نص إخباري</h3>
                <span class="sample-difficulty medium">متوسط</span>
            </div>
            <div class="sample-content">
                <p class="sample-text" data-sample="news">
                    اعلنت الحكومه اليوم عن خطه جديده لتطوير القطاع الصحي في البلاد. 
                    وتشمل هاذه الخطه بناء مستشفيات حديثه وتدريب الاطباء والممرضين 
                    على احدث التقنيات الطبيه. كما تهدف الى تحسين الخدمات الصحيه 
                    المقدمه للمواطنين في جميع انحاء البلاد.
                </p>
                <div class="sample-stats">
                    <span><i class="fas fa-exclamation-triangle"></i> 12 خطأ</span>
                    <span><i class="fas fa-clock"></i> 45 ثانية</span>
                </div>
                <button class="btn btn-primary sample-btn" data-action="load-sample" data-sample="news">
                    <i class="fas fa-upload"></i> تحميل النص
                </button>
            </div>
        </div>

        <div class="sample-card">
            <div class="sample-header">
                <h3><i class="fas fa-pen-fancy"></i> نص أدبي</h3>
                <span class="sample-difficulty hard">صعب</span>
            </div>
            <div class="sample-content">
                <p class="sample-text" data-sample="literary">
                    في ذالك اليوم الجميل، كانت الشمس تشرق على المدينه القديمه 
                    بأشعتها الذهبيه. سار الرجل في الشوارع الضيقه يتأمل جمال 
                    العماره التراثيه والبيوت القديمه التي تحكي قصص الماضي العريق. 
                    كان يشعر بالحنين الى ايام الطفوله التي قضاها في هاذه الاحياء.
                </p>
                <div class="sample-stats">
                    <span><i class="fas fa-exclamation-triangle"></i> 15 خطأ</span>
                    <span><i class="fas fa-clock"></i> 60 ثانية</span>
                </div>
                <button class="btn btn-primary sample-btn" data-action="load-sample" data-sample="literary">
                    <i class="fas fa-upload"></i> تحميل النص
                </button>
            </div>
        </div>

        <div class="sample-card">
            <div class="sample-header">
                <h3><i class="fas fa-briefcase"></i> نص تجاري</h3>
                <span class="sample-difficulty medium">متوسط</span>
            </div>
            <div class="sample-content">
                <p class="sample-text" data-sample="business">
                    تسعى شركتنا الى تقديم افضل الخدمات لعملائنا الكرام من خلال 
                    فريق عمل متخصص ومدرب على اعلى المستويات. نحن نؤمن بأن 
                    رضا العميل هو اساس نجاحنا، لذالك نعمل جاهدين على تطوير 
                    خدماتنا باستمرار لتلبية احتياجاتكم وتوقعاتكم.
                </p>
                <div class="sample-stats">
                    <span><i class="fas fa-exclamation-triangle"></i> 10 أخطاء</span>
                    <span><i class="fas fa-clock"></i> 35 ثانية</span>
                </div>
                <button class="btn btn-primary sample-btn" data-action="load-sample" data-sample="business">
                    <i class="fas fa-upload"></i> تحميل النص
                </button>
            </div>
        </div>
    </div>

    <!-- Interactive Demo Section -->
    <div class="card interactive-demo">
        <div class="card-header">
            <h2 class="card-title">
                <i class="fas fa-magic"></i>
                تجربة تفاعلية مباشرة
            </h2>
        </div>
        <div class="card-body">
            <div class="demo-grid">
                <!-- Input Section -->
                <div class="demo-input-section">
                    <h3><i class="fas fa-edit"></i> أدخل نصك هنا</h3>
                    <textarea id="demoInputText" 
                              class="demo-textarea" 
                              placeholder="أدخل نصاً يحتوي على أخطاء إملائية لتجربة النظام...

مثال: هاذا نص تجريبي يحتوي على اخطاء املائيه"></textarea>
                    
                    <div class="demo-controls">
                        <button class="btn btn-primary" id="demoCorrectBtn">
                            <i class="fas fa-check-circle"></i>
                            تدقيق النص
                        </button>
                        <button class="btn btn-secondary" id="demoClearBtn">
                            <i class="fas fa-eraser"></i>
                            مسح
                        </button>
                        <button class="btn btn-success" id="demoRandomBtn">
                            <i class="fas fa-random"></i>
                            نص عشوائي
                        </button>
                    </div>
                </div>

                <!-- Output Section -->
                <div class="demo-output-section">
                    <h3><i class="fas fa-check"></i> النتيجة</h3>
                    <div id="demoOutput" class="demo-output">
                        النص المصحح سيظهر هنا...
                    </div>
                    
                    <div class="demo-stats" id="demoStats">
                        <div class="stat-item">
                            <span class="stat-label">الكلمات:</span>
                            <span class="stat-value" id="demoWordCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">الأخطاء:</span>
                            <span class="stat-value" id="demoErrorCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">الدقة:</span>
                            <span class="stat-value" id="demoAccuracy">100%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Features Showcase -->
    <div class="card features-showcase">
        <div class="card-header">
            <h2 class="card-title">
                <i class="fas fa-star"></i>
                المميزات المعروضة في التجربة
            </h2>
        </div>
        <div class="card-body">
            <div class="features-grid">
                <div class="feature-demo">
                    <div class="feature-icon">
                        <i class="fas fa-spell-check"></i>
                    </div>
                    <h4>تصحيح فوري</h4>
                    <p>اكتشاف وتصحيح الأخطاء الإملائية في الوقت الفعلي</p>
                </div>

                <div class="feature-demo">
                    <div class="feature-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <h4>اقتراحات ذكية</h4>
                    <p>تقديم اقتراحات متعددة مع ترتيب حسب الأولوية</p>
                </div>

                <div class="feature-demo">
                    <div class="feature-icon">
                        <i class="fas fa-mouse-pointer"></i>
                    </div>
                    <h4>تفاعل مباشر</h4>
                    <p>انقر على الكلمات الخاطئة لتعديلها أو إضافتها للقاموس</p>
                </div>

                <div class="feature-demo">
                    <div class="feature-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h4>إحصائيات مفصلة</h4>
                    <p>عرض إحصائيات شاملة عن النص والأخطاء المكتشفة</p>
                </div>

                <div class="feature-demo">
                    <div class="feature-icon">
                        <i class="fas fa-database"></i>
                    </div>
                    <h4>قاموس مخصص</h4>
                    <p>إضافة كلمات جديدة لتحسين دقة التدقيق</p>
                </div>

                <div class="feature-demo">
                    <div class="feature-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h4>متوافق مع الأجهزة</h4>
                    <p>يعمل بسلاسة على جميع الأجهزة والمتصفحات</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Performance Metrics -->
    <div class="card performance-metrics">
        <div class="card-header">
            <h2 class="card-title">
                <i class="fas fa-tachometer-alt"></i>
                مقاييس الأداء
            </h2>
        </div>
        <div class="card-body">
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="metric-content">
                        <h4>سرعة المعالجة</h4>
                        <div class="metric-value">< 2 ثانية</div>
                        <p>للنصوص حتى 1000 كلمة</p>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="metric-content">
                        <h4>دقة التصحيح</h4>
                        <div class="metric-value">95%</div>
                        <p>في اكتشاف الأخطاء الشائعة</p>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-database"></i>
                    </div>
                    <div class="metric-content">
                        <h4>قاعدة البيانات</h4>
                        <div class="metric-value">500K+</div>
                        <p>كلمة عربية</p>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="metric-content">
                        <h4>سهولة الاستخدام</h4>
                        <div class="metric-value">98%</div>
                        <p>رضا المستخدمين</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.demo-container {
    max-width: 1200px;
    margin: 0 auto;
}

.demo-intro {
    margin-bottom: 30px;
}

.demo-description {
    font-size: 1.1rem;
    line-height: 1.7;
    color: var(--text-primary);
    margin: 0;
}

.demo-samples {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 25px;
    margin-bottom: 30px;
}

.sample-card {
    background: var(--bg-secondary);
    border-radius: 15px;
    padding: 20px;
    border: 1px solid var(--border-color);
    transition: all var(--transition-medium);
    height: 100%;
    display: flex;
    flex-direction: column;
}

.sample-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-medium);
}

.sample-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.sample-header h3 {
    color: var(--text-primary);
    font-size: 1.2rem;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 10px;
}

.sample-difficulty {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    color: white;
}

.sample-difficulty.easy {
    background: var(--success-color);
}

.sample-difficulty.medium {
    background: var(--warning-color);
}

.sample-difficulty.hard {
    background: var(--accent-color);
}

.sample-content {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.sample-text {
    background: var(--bg-primary);
    padding: 15px;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    line-height: 1.6;
    color: var(--text-primary);
    margin-bottom: 15px;
    flex: 1;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.sample-text:hover {
    background: var(--bg-tertiary);
    border-color: var(--primary-color);
}

.sample-stats {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.sample-stats span {
    display: flex;
    align-items: center;
    gap: 5px;
}

.sample-btn {
    align-self: flex-start;
}

.interactive-demo {
    margin-bottom: 30px;
}

.demo-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
}

.demo-input-section,
.demo-output-section {
    display: flex;
    flex-direction: column;
}

.demo-input-section h3,
.demo-output-section h3 {
    color: var(--text-primary);
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.demo-textarea {
    width: 100%;
    min-height: 200px;
    padding: 15px;
    border: 2px solid var(--border-color);
    border-radius: 10px;
    font-size: 1rem;
    line-height: 1.6;
    resize: vertical;
    direction: rtl;
    text-align: right;
    font-family: 'Tajawal', sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    margin-bottom: 15px;
    transition: all var(--transition-fast);
}

.demo-textarea:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
}

.demo-controls {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.demo-output {
    background: var(--bg-primary);
    border: 2px solid var(--border-color);
    border-radius: 10px;
    padding: 15px;
    min-height: 200px;
    font-size: 1rem;
    line-height: 1.6;
    direction: rtl;
    text-align: right;
    white-space: pre-wrap;
    word-wrap: break-word;
    color: var(--text-primary);
    margin-bottom: 15px;
}

.demo-stats {
    display: flex;
    gap: 20px;
    padding: 15px;
    background: var(--bg-secondary);
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

.stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
}

.stat-label {
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.stat-value {
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--primary-color);
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
}

.feature-demo {
    text-align: center;
    padding: 20px;
    background: var(--bg-secondary);
    border-radius: 12px;
    border: 1px solid var(--border-color);
    transition: all var(--transition-medium);
}

.feature-demo:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-light);
}

.feature-icon {
    width: 60px;
    height: 60px;
    background: var(--primary-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 15px;
    color: white;
    font-size: 1.5rem;
}

.feature-demo h4 {
    color: var(--text-primary);
    margin-bottom: 10px;
    font-size: 1.1rem;
}

.feature-demo p {
    color: var(--text-secondary);
    font-size: 0.9rem;
    line-height: 1.5;
    margin: 0;
}

.metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
}

.metric-card {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 20px;
    background: var(--bg-secondary);
    border-radius: 12px;
    border: 1px solid var(--border-color);
    transition: all var(--transition-medium);
}

.metric-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-light);
}

.metric-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(45deg, var(--primary-color), #2980b9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.3rem;
    flex-shrink: 0;
}

.metric-content h4 {
    color: var(--text-primary);
    margin-bottom: 5px;
    font-size: 1rem;
}

.metric-value {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--primary-color);
    margin-bottom: 5px;
}

.metric-content p {
    color: var(--text-secondary);
    font-size: 0.85rem;
    margin: 0;
}

@media (max-width: 768px) {
    .demo-grid {
        grid-template-columns: 1fr;
    }
    
    .demo-controls {
        flex-direction: column;
    }
    
    .demo-stats {
        flex-direction: column;
        gap: 10px;
    }
    
    .stat-item {
        flex-direction: row;
        justify-content: space-between;
    }
    
    .metric-card {
        flex-direction: column;
        text-align: center;
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
// Demo page functionality
document.addEventListener('DOMContentLoaded', function() {
    const demoInputText = document.getElementById('demoInputText');
    const demoOutput = document.getElementById('demoOutput');
    const demoCorrectBtn = document.getElementById('demoCorrectBtn');
    const demoClearBtn = document.getElementById('demoClearBtn');
    const demoRandomBtn = document.getElementById('demoRandomBtn');
    
    // Sample texts
    const sampleTexts = {
        academic: `هاذا بحث علمي يتناول موضوع التعليم الالكتروني في الجامعات العربيه. يهدف هذا البحث الى دراسة تأثير التكنولوجيا على العمليه التعليميه وكيفية تحسين جودة التعليم من خلال استخدام الوسائل الحديثه.`,
        
        news: `اعلنت الحكومه اليوم عن خطه جديده لتطوير القطاع الصحي في البلاد. وتشمل هاذه الخطه بناء مستشفيات حديثه وتدريب الاطباء والممرضين على احدث التقنيات الطبيه. كما تهدف الى تحسين الخدمات الصحيه المقدمه للمواطنين في جميع انحاء البلاد.`,
        
        literary: `في ذالك اليوم الجميل، كانت الشمس تشرق على المدينه القديمه بأشعتها الذهبيه. سار الرجل في الشوارع الضيقه يتأمل جمال العماره التراثيه والبيوت القديمه التي تحكي قصص الماضي العريق. كان يشعر بالحنين الى ايام الطفوله التي قضاها في هاذه الاحياء.`,
        
        business: `تسعى شركتنا الى تقديم افضل الخدمات لعملائنا الكرام من خلال فريق عمل متخصص ومدرب على اعلى المستويات. نحن نؤمن بأن رضا العميل هو اساس نجاحنا، لذالك نعمل جاهدين على تطوير خدماتنا باستمرار لتلبية احتياجاتكم وتوقعاتكم.`
    };
    
    // Load sample text
    document.addEventListener('click', function(e) {
        if (e.target.matches('[data-action="load-sample"]')) {
            const sampleType = e.target.getAttribute('data-sample');
            if (sampleTexts[sampleType]) {
                demoInputText.value = sampleTexts[sampleType];
                updateDemoStats();
                window.notificationManager.success('تم تحميل النص التجريبي');
                
                // Scroll to demo section
                document.querySelector('.interactive-demo').scrollIntoView({
                    behavior: 'smooth'
                });
            }
        }
    });
    
    // Sample text click to load
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('sample-text')) {
            const sampleType = e.target.getAttribute('data-sample');
            if (sampleTexts[sampleType]) {
                demoInputText.value = sampleTexts[sampleType];
                updateDemoStats();
                window.notificationManager.success('تم تحميل النص التجريبي');
                
                // Scroll to demo section
                document.querySelector('.interactive-demo').scrollIntoView({
                    behavior: 'smooth'
                });
            }
        }
    });
    
    // Demo controls
    if (demoCorrectBtn) {
        demoCorrectBtn.addEventListener('click', async function() {
            const text = demoInputText.value.trim();
            
            if (!text) {
                window.notificationManager.warning('يرجى إدخال نص للتدقيق');
                return;
            }
            
            window.loadingManager.show('جاري تدقيق النص...');
            
            try {
                const response = await fetch('/api/correct', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ text: text })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    if (result.diff_html) {
                        demoOutput.innerHTML = result.diff_html;
                    } else {
                        demoOutput.textContent = result.corrected_text;
                    }
                    
                    updateDemoStats(result.statistics);
                    window.notificationManager.success('تم تدقيق النص بنجاح');
                } else {
                    window.notificationManager.error(result.error);
                }
                
            } catch (error) {
                console.error('Error:', error);
                window.notificationManager.error('حدث خطأ أثناء التدقيق');
            } finally {
                window.loadingManager.hide();
            }
        });
    }
    
    if (demoClearBtn) {
        demoClearBtn.addEventListener('click', function() {
            demoInputText.value = '';
            demoOutput.textContent = 'النص المصحح سيظهر هنا...';
            updateDemoStats();
            window.notificationManager.info('تم مسح النص');
        });
    }
    
    if (demoRandomBtn) {
        demoRandomBtn.addEventListener('click', function() {
            const samples = Object.values(sampleTexts);
            const randomSample = samples[Math.floor(Math.random() * samples.length)];
            demoInputText.value = randomSample;
            updateDemoStats();
            window.notificationManager.success('تم تحميل نص عشوائي');
        });
    }
    
    // Update stats on input
    if (demoInputText) {
        demoInputText.addEventListener('input', updateDemoStats);
    }
    
    function updateDemoStats(statistics = null) {
        const text = demoInputText.value || '';
        const wordCount = text.trim() ? text.trim().split(/\s+/).length : 0;
        
        document.getElementById('demoWordCount').textContent = wordCount;
        
        if (statistics) {
            document.getElementById('demoErrorCount').textContent = statistics.errors_found || 0;
            document.getElementById('demoAccuracy').textContent = (statistics.accuracy_rate || 100) + '%';
        } else {
            document.getElementById('demoErrorCount').textContent = '0';
            document.getElementById('demoAccuracy').textContent = '100%';
        }
    }
    
    // Initialize stats
    updateDemoStats();
});
</script>
{% endblock %}

